<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer Guide - LegacyStream Documentation</title>
    <meta name="description" content="Complete guide for developers contributing to the LegacyStream project">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/dark-mode.css">
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
</head>
<body class="dark-mode">
    <div class="container">
        <!-- Header -->
        <header class="header">
            <nav class="navbar">
                <div class="nav-brand">
                    <h1 class="logo">LegacyStream</h1>
                    <span class="tagline">High-Performance Audio Streaming</span>
                </div>
                <div class="nav-menu">
                    <a href="index.html#features" class="nav-link">Features</a>
                    <a href="index.html#documentation" class="nav-link">Documentation</a>
                    <a href="index.html#api" class="nav-link">API</a>
                    <a href="index.html#download" class="nav-link">Download</a>
                    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                        <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-header">
                <h1>Developer Guide</h1>
                <p>Complete guide for developers contributing to the LegacyStream project</p>
            </div>

            <div class="content-grid">
                <div class="content-sidebar">
                    <nav class="sidebar-nav">
                        <h3>Table of Contents</h3>
                        <ul>
                            <li><a href="#introduction">Introduction</a></li>
                            <li><a href="#architecture">Architecture Overview</a></li>
                            <li><a href="#development-setup">Development Setup</a></li>
                            <li><a href="#code-organization">Code Organization</a></li>
                            <li><a href="#coding-standards">Coding Standards</a></li>
                            <li><a href="#testing">Testing</a></li>
                            <li><a href="#documentation">Documentation</a></li>
                            <li><a href="#contribution-guidelines">Contribution Guidelines</a></li>
                            <li><a href="#build-system">Build System</a></li>
                            <li><a href="#deployment">Deployment</a></li>
                            <li><a href="#api-reference">API Reference</a></li>
                            <li><a href="#troubleshooting">Troubleshooting</a></li>
                        </ul>
                    </nav>
                </div>

                <div class="content-main">
                    <section id="introduction">
                        <h2>Introduction</h2>
                        <p>LegacyStream is an open-source, high-performance audio streaming server built with C++ and Qt. This guide provides comprehensive information for developers who want to contribute to the project.</p>
                        
                        <h3>Project Goals</h3>
                        <ul>
                            <li><strong>High Performance:</strong> Optimized for Windows with IOCP</li>
                            <li><strong>Multi-Protocol Support:</strong> IceCast and SHOUTcast compatibility</li>
                            <li><strong>Modern Architecture:</strong> Modular, extensible design</li>
                            <li><strong>Developer Friendly:</strong> Comprehensive documentation and tools</li>
                            <li><strong>Cross-Platform:</strong> Windows-focused with potential for other platforms</li>
                        </ul>

                        <h3>Technology Stack</h3>
                        <ul>
                            <li><strong>Language:</strong> C++17/20</li>
                            <li><strong>Framework:</strong> Qt 6.x</li>
                            <li><strong>Build System:</strong> CMake</li>
                            <li><strong>Testing:</strong> Google Test</li>
                            <li><strong>Documentation:</strong> Doxygen</li>
                            <li><strong>Version Control:</strong> Git</li>
                        </ul>
                    </section>

                    <section id="architecture">
                        <h2>Architecture Overview</h2>
                        
                        <h3>Core Components</h3>
                        <p>LegacyStream follows a modular architecture with clear separation of concerns:</p>
                        
                        <h4>Core Module</h4>
                        <ul>
                            <li><strong>ServerManager:</strong> Central coordination and lifecycle management</li>
                            <li><strong>ConfigurationManager:</strong> Settings and configuration management</li>
                            <li><strong>PerformanceManager:</strong> Performance optimization and monitoring</li>
                            <li><strong>LogManager:</strong> Logging and debugging facilities</li>
                        </ul>

                        <h4>Streaming Module</h4>
                        <ul>
                            <li><strong>StreamManager:</strong> Audio stream management</li>
                            <li><strong>CodecManager:</strong> Audio codec handling</li>
                            <li><strong>ProtocolManager:</strong> IceCast/SHOUTcast protocols</li>
                            <li><strong>HttpServer:</strong> HTTP server implementation</li>
                        </ul>

                        <h4>GUI Module</h4>
                        <ul>
                            <li><strong>MainWindow:</strong> Primary GUI interface</li>
                            <li><strong>ThemeManager:</strong> UI theming and customization</li>
                            <li><strong>AccessibilityManager:</strong> Accessibility features</li>
                        </ul>

                        <h3>Design Patterns</h3>
                        <ul>
                            <li><strong>Singleton Pattern:</strong> Used for managers and global services</li>
                            <li><strong>Observer Pattern:</strong> Event-driven architecture</li>
                            <li><strong>Factory Pattern:</strong> Object creation and management</li>
                            <li><strong>Strategy Pattern:</strong> Pluggable algorithms and protocols</li>
                        </ul>

                        <h3>Data Flow</h3>
                        <ol>
                            <li>Audio input is captured or loaded from files</li>
                            <li>Audio data is processed and encoded</li>
                            <li>Encoded data is buffered and queued</li>
                            <li>HTTP server delivers streams to clients</li>
                            <li>Real-time statistics are collected and displayed</li>
                        </ol>
                    </section>

                    <section id="development-setup">
                        <h2>Development Setup</h2>
                        
                        <h3>Prerequisites</h3>
                        <ul>
                            <li><strong>Windows 10/11:</strong> Development environment</li>
                            <li><strong>Visual Studio 2019/2022:</strong> C++ compiler and IDE</li>
                            <li><strong>Qt 6.x:</strong> Application framework</li>
                            <li><strong>CMake 3.16+:</strong> Build system</li>
                            <li><strong>Git:</strong> Version control</li>
                        </ul>

                        <h3>Environment Setup</h3>
                        <ol>
                            <li>Clone the repository:
                                <pre class="code-block"><code>git clone https://github.com/legacystream/legacystream.git
cd legacystream</code></pre>
                            </li>
                            <li>Install Qt 6.x and set environment variables</li>
                            <li>Install Visual Studio with C++ development tools</li>
                            <li>Install CMake and add to PATH</li>
                            <li>Install additional dependencies:
                                <pre class="code-block"><code># Install vcpkg for dependencies
git clone https://github.com/Microsoft/vcpkg.git
cd vcpkg
.\bootstrap-vcpkg.bat
.\vcpkg install openssl:x64-windows
.\vcpkg install zlib:x64-windows</code></pre>
                            </li>
                        </ol>

                        <h3>Building from Source</h3>
                        <pre class="code-block"><code># Create build directory
mkdir build
cd build

# Configure with CMake
cmake .. -DCMAKE_TOOLCHAIN_FILE=C:/vcpkg/scripts/buildsystems/vcpkg.cmake

# Build the project
cmake --build . --config Release

# Run tests
ctest --output-on-failure</code></pre>

                        <div class="note">
                            <strong>Tip:</strong> Use Visual Studio's CMake integration for a better development experience.
                        </div>
                    </section>

                    <section id="code-organization">
                        <h2>Code Organization</h2>
                        
                        <h3>Directory Structure</h3>
                        <pre class="code-block"><code>LegacyStream/
├── include/           # Header files
│   ├── core/         # Core functionality
│   ├── gui/          # GUI components
│   ├── streaming/    # Streaming modules
│   ├── ssl/          # Security components
│   └── realtime/     # Real-time features
├── src/              # Source files
│   ├── core/         # Core implementation
│   ├── gui/          # GUI implementation
│   ├── streaming/    # Streaming implementation
│   └── ssl/          # Security implementation
├── tests/            # Test files
├── docs/             # Documentation
├── scripts/          # Build and deployment scripts
└── resources/        # Application resources</code></pre>

                        <h3>Naming Conventions</h3>
                        <ul>
                            <li><strong>Classes:</strong> PascalCase (e.g., <code>StreamManager</code>)</li>
                            <li><strong>Functions:</strong> camelCase (e.g., <code>startStream()</code>)</li>
                            <li><strong>Variables:</strong> camelCase (e.g., <code>streamName</code>)</li>
                            <li><strong>Constants:</strong> UPPER_SNAKE_CASE (e.g., <code>MAX_CONNECTIONS</code>)</li>
                            <li><strong>Files:</strong> PascalCase (e.g., <code>StreamManager.h</code>)</li>
                        </ul>

                        <h3>File Organization</h3>
                        <ul>
                            <li>One class per header/source file pair</li>
                            <li>Header files contain declarations only</li>
                            <li>Source files contain implementations</li>
                            <li>Use forward declarations when possible</li>
                            <li>Include guards for all header files</li>
                        </ul>
                    </section>

                    <section id="coding-standards">
                        <h2>Coding Standards</h2>
                        
                        <h3>C++ Standards</h3>
                        <ul>
                            <li>Use C++17/20 features where appropriate</li>
                            <li>Prefer modern C++ over C-style code</li>
                            <li>Use smart pointers instead of raw pointers</li>
                            <li>Use RAII for resource management</li>
                            <li>Prefer const correctness</li>
                        </ul>

                        <h3>Code Style</h3>
                        <pre class="code-block"><code>// Good example
class StreamManager {
public:
    explicit StreamManager(QObject* parent = nullptr);
    ~StreamManager();
    
    bool startStream(const QString& streamName);
    void stopStream(const QString& streamName);
    
private:
    void initializeStream();
    void cleanupStream();
    
    QString m_streamName;
    bool m_isRunning = false;
};</code></pre>

                        <h3>Documentation</h3>
                        <ul>
                            <li>Use Doxygen comments for all public APIs</li>
                            <li>Include examples in documentation</li>
                            <li>Document exceptions and error conditions</li>
                            <li>Keep documentation up to date</li>
                        </ul>

                        <h3>Error Handling</h3>
                        <ul>
                            <li>Use exceptions for exceptional conditions</li>
                            <li>Return error codes for expected failures</li>
                            <li>Log errors with appropriate detail</li>
                            <li>Provide meaningful error messages</li>
                        </ul>
                    </section>

                    <section id="testing">
                        <h2>Testing</h2>
                        
                        <h3>Test Types</h3>
                        <ul>
                            <li><strong>Unit Tests:</strong> Test individual components</li>
                            <li><strong>Integration Tests:</strong> Test component interactions</li>
                            <li><strong>Performance Tests:</strong> Test performance characteristics</li>
                            <li><strong>GUI Tests:</strong> Test user interface functionality</li>
                        </ul>

                        <h3>Writing Tests</h3>
                        <pre class="code-block"><code>#include <gtest/gtest.h>
#include "StreamManager.h"

class StreamManagerTest : public ::testing::Test {
protected:
    void SetUp() override {
        manager = std::make_unique<StreamManager>();
    }

    void TearDown() override {
        manager.reset();
    }

    std::unique_ptr<StreamManager> manager;
};

TEST_F(StreamManagerTest, StartStream_ValidName_ReturnsTrue) {
    // Arrange
    QString streamName = "test_stream";
    
    // Act
    bool result = manager->startStream(streamName);
    
    // Assert
    EXPECT_TRUE(result);
    EXPECT_TRUE(manager->isStreamRunning(streamName));
}</code></pre>

                        <h3>Running Tests</h3>
                        <pre class="code-block"><code># Run all tests
ctest --output-on-failure

# Run specific test
./tests/StreamManagerTest --gtest_filter=StartStream_ValidName_ReturnsTrue

# Run with verbose output
ctest --verbose</code></pre>
                    </section>

                    <section id="documentation">
                        <h2>Documentation</h2>
                        
                        <h3>Code Documentation</h3>
                        <pre class="code-block"><code>/**
 * @brief Manages audio streams and their lifecycle
 * 
 * The StreamManager class provides functionality to create, start, stop,
 * and monitor audio streams. It handles stream configuration, encoding,
 * and delivery to clients.
 * 
 * @example
 * @code
 * StreamManager manager;
 * manager.startStream("my_stream");
 * @endcode
 */
class StreamManager : public QObject {
    Q_OBJECT
public:
    /**
     * @brief Starts a new audio stream
     * @param streamName The name of the stream to start
     * @return true if stream started successfully, false otherwise
     * @throws std::runtime_error if stream configuration is invalid
     */
    bool startStream(const QString& streamName);
};</code></pre>

                        <h3>API Documentation</h3>
                        <ul>
                            <li>Document all public APIs with Doxygen</li>
                            <li>Include usage examples</li>
                            <li>Document parameters and return values</li>
                            <li>Explain error conditions and exceptions</li>
                        </ul>

                        <h3>Architecture Documentation</h3>
                        <ul>
                            <li>Maintain architecture diagrams</li>
                            <li>Document design decisions</li>
                            <li>Keep component relationships current</li>
                            <li>Document data flow and state management</li>
                        </ul>
                    </section>

                    <section id="contribution-guidelines">
                        <h2>Contribution Guidelines</h2>
                        
                        <h3>Before Contributing</h3>
                        <ul>
                            <li>Read the project documentation</li>
                            <li>Check existing issues and pull requests</li>
                            <li>Discuss major changes in issues first</li>
                            <li>Ensure your development environment is set up</li>
                        </ul>

                        <h3>Development Workflow</h3>
                        <ol>
                            <li>Fork the repository</li>
                            <li>Create a feature branch:
                                <pre class="code-block"><code>git checkout -b feature/your-feature-name</code></pre>
                            </li>
                            <li>Make your changes following coding standards</li>
                            <li>Write tests for new functionality</li>
                            <li>Update documentation as needed</li>
                            <li>Run the full test suite</li>
                            <li>Commit your changes with clear messages</li>
                            <li>Push to your fork and create a pull request</li>
                        </ol>

                        <h3>Commit Messages</h3>
                        <p>Use clear, descriptive commit messages:</p>
                        <pre class="code-block"><code>feat: add support for AAC audio codec
fix: resolve memory leak in StreamManager
docs: update API documentation
test: add unit tests for new features
refactor: improve error handling in HttpServer</code></pre>

                        <h3>Pull Request Guidelines</h3>
                        <ul>
                            <li>Provide a clear description of changes</li>
                            <li>Include tests for new functionality</li>
                            <li>Update documentation if needed</li>
                            <li>Ensure all tests pass</li>
                            <li>Follow the project's coding standards</li>
                        </ul>
                    </section>

                    <section id="build-system">
                        <h2>Build System</h2>
                        
                        <h3>CMake Configuration</h3>
                        <pre class="code-block"><code># CMakeLists.txt example
cmake_minimum_required(VERSION 3.16)
project(LegacyStream VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

find_package(Qt6 REQUIRED COMPONENTS Core Widgets Network)
find_package(OpenSSL REQUIRED)

add_executable(LegacyStream
    src/main.cpp
    src/core/ServerManager.cpp
    src/streaming/StreamManager.cpp
)

target_link_libraries(LegacyStream
    Qt6::Core
    Qt6::Widgets
    Qt6::Network
    OpenSSL::SSL
    OpenSSL::Crypto
)</code></pre>

                        <h3>Build Configurations</h3>
                        <ul>
                            <li><strong>Debug:</strong> Development with debug symbols</li>
                            <li><strong>Release:</strong> Optimized production build</li>
                            <li><strong>RelWithDebInfo:</strong> Release with debug info</li>
                            <li><strong>MinSizeRel:</strong> Minimal size release</li>
                        </ul>

                        <h3>Dependencies</h3>
                        <ul>
                            <li><strong>Qt 6.x:</strong> Application framework</li>
                            <li><strong>OpenSSL:</strong> SSL/TLS support</li>
                            <li><strong>Google Test:</strong> Testing framework</li>
                            <li><strong>Doxygen:</strong> Documentation generation</li>
                        </ul>
                    </section>

                    <section id="deployment">
                        <h2>Deployment</h2>
                        
                        <h3>Release Process</h3>
                        <ol>
                            <li>Update version numbers in CMakeLists.txt</li>
                            <li>Update CHANGELOG.md with release notes</li>
                            <li>Create a release tag:
                                <pre class="code-block"><code>git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0</code></pre>
                            </li>
                            <li>Build release packages</li>
                            <li>Test release packages</li>
                            <li>Upload to release page</li>
                        </ol>

                        <h3>Packaging</h3>
                        <ul>
                            <li>Create Windows installer with NSIS</li>
                            <li>Include all required dependencies</li>
                            <li>Provide portable version</li>
                            <li>Include documentation and examples</li>
                        </ul>

                        <h3>Continuous Integration</h3>
                        <ul>
                            <li>Automated builds on multiple platforms</li>
                            <li>Automated testing</li>
                            <li>Code quality checks</li>
                            <li>Automated deployment</li>
                        </ul>
                    </section>

                    <section id="api-reference">
                        <h2>API Reference</h2>
                        
                        <h3>Core APIs</h3>
                        <pre class="code-block"><code>// ServerManager API
class ServerManager {
public:
    bool initialize();
    void shutdown();
    bool isRunning() const;
    
    // Stream management
    bool createStream(const QString& name);
    bool startStream(const QString& name);
    bool stopStream(const QString& name);
    bool deleteStream(const QString& name);
};

// ConfigurationManager API
class ConfigurationManager {
public:
    void loadConfiguration(const QString& file);
    void saveConfiguration(const QString& file);
    QVariant getValue(const QString& key);
    void setValue(const QString& key, const QVariant& value);
};</code></pre>

                        <h3>Streaming APIs</h3>
                        <pre class="code-block"><code>// StreamManager API
class StreamManager {
public:
    bool addMountPoint(const QString& path, const StreamConfig& config);
    bool removeMountPoint(const QString& path);
    QList<StreamInfo> getActiveStreams() const;
    
    // Audio processing
    void setAudioFormat(const QString& stream, const AudioFormat& format);
    void setBitrate(const QString& stream, int bitrate);
    void setSampleRate(const QString& stream, int sampleRate);
};</code></pre>

                        <h3>GUI APIs</h3>
                        <pre class="code-block"><code>// MainWindow API
class MainWindow : public QMainWindow {
public:
    void showStreamManager();
    void showConfiguration();
    void showStatistics();
    void showLogs();
};</code></pre>
                    </section>

                    <section id="troubleshooting">
                        <h2>Troubleshooting</h2>
                        
                        <h3>Common Build Issues</h3>
                        
                        <h4>Qt Not Found</h4>
                        <pre class="code-block"><code># Set Qt6_DIR environment variable
set Qt6_DIR=C:\Qt\6.5.0\msvc2019_64\lib\cmake\Qt6

# Or specify in CMake
cmake .. -DQt6_DIR=C:\Qt\6.5.0\msvc2019_64\lib\cmake\Qt6</code></pre>

                        <h4>OpenSSL Not Found</h4>
                        <pre class="code-block"><code># Use vcpkg for dependencies
cmake .. -DCMAKE_TOOLCHAIN_FILE=C:/vcpkg/scripts/buildsystems/vcpkg.cmake</code></pre>

                        <h4>Compiler Errors</h4>
                        <ul>
                            <li>Ensure you're using C++17 or later</li>
                            <li>Check that all required headers are included</li>
                            <li>Verify Qt modules are properly linked</li>
                            <li>Check for missing dependencies</li>
                        </ul>

                        <h3>Runtime Issues</h3>
                        
                        <h4>Application Won't Start</h4>
                        <ul>
                            <li>Check if all DLLs are in PATH</li>
                            <li>Verify Qt plugins are accessible</li>
                            <li>Check for missing configuration files</li>
                            <li>Review application logs</li>
                        </ul>

                        <h4>Streaming Issues</h4>
                        <ul>
                            <li>Verify audio codecs are available</li>
                            <li>Check network port availability</li>
                            <li>Review stream configuration</li>
                            <li>Check firewall settings</li>
                        </ul>

                        <h3>Debugging</h3>
                        <ul>
                            <li>Use Visual Studio debugger</li>
                            <li>Enable debug logging</li>
                            <li>Use Qt Creator for GUI debugging</li>
                            <li>Check Windows Event Viewer</li>
                        </ul>
                    </section>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-bottom">
                <p>LegacyStream © 2025 All Rights Reserved.</p>
                <p>Licensed under MIT License.</p>
            </div>
        </footer>
    </div>

    <script src="assets/js/main.js"></script>
</body>
</html> 